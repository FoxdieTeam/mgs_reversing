#include "common.h"
#include "libdg/libdg.h"
#include "Anime/animconv/anime.h"
#include "strcode.h"

/*---------------------------------------------------------------------------*/

static const char anm_mark_data_800DFEB4[] = {
    0x01,0x56,0x04,0x00, 0x0b,0x00,0x5e,0x00,
    0xb1,0x01,0x09,0x01, 0x00,0x0c,0x00,0x04,
    0x0a,0x00,0x64,0x00, 0x64,0x08,0x32,0x19,
    0x14,0x02,0x00,0x01, 0x0d,0x0a,0x00,0x64,
    0x00,0x64,0x08,0x32, 0x96,0xaa,0x02,0x00,
    0x03,0x0a,0xff,0x9c, 0xff,0x9c,0x08,0xce,
    0x6a,0x56,0x02,0x00, 0x16,0x0a,0x01,0x2c,
    0xfe,0x98,0x08,0xce, 0xe7,0xec,0x02,0x00,
    0x01,0x0a,0x01,0x2c, 0xff,0xe2,0x08,0xce,
    0xe7,0xec,0x02,0x00, 0x01,0x0a,0x01,0x2c,
    0xff,0xf4,0x02,0x00, 0x01,0x0a,0xfa,0xba,
    0x00,0xf0,0x02,0x00, 0x01,0x0f,0x01,0x00,
    0x0c,0x00,0x04,0x0a, 0x00,0x32,0x00,0x32,
    0x08,0x32,0x19,0x14, 0x02,0x00,0x01,0x0d,
    0x0a,0x00,0x32,0x00, 0x32,0x08,0x32,0x96,
    0xaa,0x02,0x00,0x03, 0x0a,0xff,0xce,0xff,
    0xce,0x08,0xce,0x6a, 0x56,0x02,0x00,0x16,
    0x0a,0x00,0x96,0xff, 0x4c,0x08,0xce,0xe7,
    0xec,0x02,0x00,0x01, 0x0a,0x00,0x96,0xff,
    0xf1,0x08,0xce,0xe7, 0xec,0x02,0x00,0x01,
    0x0a,0x00,0x96,0xff, 0xfa,0x02,0x00,0x01,
    0x0a,0xfd,0x5d,0x00, 0x78,0x02,0x00,0x01,
    0x0f,0x0a,0xff,0xd8, 0xff,0xd8,0x01,0x00,
    0x0c,0x00,0x04,0x0a, 0x00,0x19,0x00,0x19,
    0x08,0x32,0x19,0x14, 0x02,0x00,0x01,0x0d,
    0x0a,0x00,0x19,0x00, 0x19,0x08,0x32,0x96,
    0xaa,0x02,0x00,0x03, 0x0a,0xff,0xe7,0xff,
    0xe7,0x08,0xce,0x6a, 0x56,0x02,0x00,0x16,
    0x0a,0x00,0x4b,0xff, 0xa6,0x08,0xce,0xe7,
    0xec,0x02,0x00,0x01, 0x0a,0x00,0x4b,0xff,
    0xf9,0x08,0xce,0xe7, 0xec,0x02,0x00,0x01,
    0x0a,0x00,0x4b,0xff, 0xf9,0x02,0x00,0x01,
    0x0a,0xfe,0xd4,0x00, 0x3c,0x02,0x00,0x01,
    0x0f,0x0a,0xff,0xc4, 0xff,0xc4,0x01,0x00,
    0x0c,0x00,0x04,0x0a, 0x00,0x0a,0x00,0x0a,
    0x08,0x32,0x19,0x14, 0x02,0x00,0x01,0x0d,
    0x0a,0x00,0x0a,0x00, 0x0a,0x08,0x32,0x96,
    0xaa,0x02,0x00,0x03, 0x0a,0xff,0xf6,0xff,
    0xf6,0x08,0xce,0x6a, 0x56,0x02,0x00,0x16,
    0x0a,0x00,0x1e,0xff, 0xdc,0x08,0xce,0xe7,
    0xec,0x02,0x00,0x01, 0x0a,0x00,0x1e,0xff,
    0xfe,0x08,0xce,0xe7, 0xec,0x02,0x00,0x01,
    0x0a,0x00,0x1e,0xff, 0xfe,0x02,0x00,0x01,
    0x0a,0xff,0xb0,0x00, 0x0a,0x02,0x00,0x01,
    0x0f
};

static ANIMATION anm_mark_form_800C3418 = {
    PCX_B_MARK,                     // field_0_texture_hash
    1,                              // field_2
    1,                              // field_4
    1,                              // n_anims
    1,                              // n_vertices
    500,                            // field_A
    1,                              // field_C
    80,                             // field_E_xw
    80,                             // field_10_yh
    0,                              // field_12_rgb
    NULL,                           // pre_script
    (char *)anm_mark_data_800DFEB4  // field_18_ptr
};

/*---------------------------------------------------------------------------*/

static const char anm_mark_data_800E0018[] = {
    0x00,0xf9,0x03,0x00, 0x09,0x00,0x5c,0x00,
    0xaf,0x01,0x00,0x0c, 0x00,0x04,0x0a,0x00,
    0x64,0x00,0x64,0x08, 0x2d,0x23,0x14,0x02,
    0x00,0x01,0x0d,0x0a, 0x00,0x64,0x00,0x64,
    0x08,0x46,0x6e,0xaa, 0x02,0x00,0x03,0x0a,
    0xff,0x9c,0xff,0x9c, 0x08,0xba,0x92,0x56,
    0x02,0x00,0x16,0x0a, 0x01,0x2c,0xfe,0x98,
    0x08,0xd3,0xdd,0xec, 0x02,0x00,0x01,0x0a,
    0x01,0x2c,0xff,0xe2, 0x08,0xd3,0xdd,0xec,
    0x02,0x00,0x01,0x0a, 0x01,0x2c,0xff,0xf4,
    0x02,0x00,0x01,0x0a, 0xfa,0xba,0x00,0xf0,
    0x02,0x00,0x01,0x0f, 0x01,0x00,0x0c,0x00,
    0x04,0x0a,0x00,0x32, 0x00,0x32,0x08,0x2d,
    0x23,0x14,0x02,0x00, 0x01,0x0d,0x0a,0x00,
    0x32,0x00,0x32,0x08, 0x46,0x6e,0xaa,0x02,
    0x00,0x03,0x0a,0xff, 0xce,0xff,0xce,0x08,
    0xba,0x92,0x56,0x02, 0x00,0x16,0x0a,0x00,
    0x96,0xff,0x4c,0x08, 0xd3,0xdd,0xec,0x02,
    0x00,0x01,0x0a,0x00, 0x96,0xff,0xf1,0x08,
    0xd3,0xdd,0xec,0x02, 0x00,0x01,0x0a,0x00,
    0x96,0xff,0xfa,0x02, 0x00,0x01,0x0a,0xfd,
    0x5d,0x00,0x78,0x02, 0x00,0x01,0x0f,0x01,
    0x00,0x0c,0x00,0x04, 0x0a,0x00,0x19,0x00,
    0x19,0x08,0x32,0x19, 0x14,0x02,0x00,0x01,
    0x0d,0x0a,0x00,0x19, 0x00,0x19,0x08,0x32,
    0x96,0xaa,0x02,0x00, 0x03,0x0a,0xff,0xe7,
    0xff,0xe7,0x08,0xce, 0x6a,0x56,0x02,0x00,
    0x16,0x0a,0x00,0x4b, 0xff,0xa6,0x08,0xce,
    0xe7,0xec,0x02,0x00, 0x01,0x0a,0x00,0x4b,
    0xff,0xf9,0x08,0xce, 0xe7,0xec,0x02,0x00,
    0x01,0x0a,0x00,0x4b, 0xff,0xf9,0x02,0x00,
    0x01,0x0a,0xfe,0xd4, 0x00,0x3c,0x02,0x00,
    0x01,0x0f
};

static ANIMATION anm_mark_form_800C3434 = {
    PCX_Q_MARK,                     // field_0_texture_hash
    1,                              // field_2
    1,                              // field_4
    1,                              // n_anims
    1,                              // n_vertices
    500,                            // field_A
    1,                              // field_C
    80,                             // field_E_xw
    80,                             // field_10_yh
    0,                              // field_12_rgb
    NULL,                           // pre_script
    (char *)anm_mark_data_800E0018  // field_18_ptr
};

/*---------------------------------------------------------------------------*/

static const char anm_mark_data_800E011C[] = {
    0x00,0xf9,0x03,0x00, 0x09,0x00,0x5c,0x00,
    0xaf,0x01,0x00,0x0c, 0x00,0x04,0x0a,0x00,
    0x64,0x00,0x64,0x08, 0x19,0x26,0x2d,0x02,
    0x00,0x01,0x0d,0x0a, 0x00,0x64,0x00,0x64,
    0x08,0x96,0x62,0x46, 0x02,0x00,0x03,0x0a,
    0xff,0x9c,0xff,0x9c, 0x08,0x6a,0x9e,0xba,
    0x02,0x00,0x16,0x0a, 0x01,0x2c,0xfe,0x98,
    0x08,0xe7,0xda,0xd3, 0x02,0x00,0x01,0x0a,
    0x01,0x2c,0xff,0xe2, 0x08,0xe7,0xda,0xd3,
    0x02,0x00,0x01,0x0a, 0x01,0x2c,0xff,0xf4,
    0x02,0x00,0x01,0x0a, 0xfa,0xba,0x00,0xf0,
    0x02,0x00,0x01,0x0f, 0x01,0x00,0x0c,0x00,
    0x04,0x0a,0x00,0x32, 0x00,0x32,0x08,0x2d,
    0x23,0x14,0x02,0x00, 0x01,0x0d,0x0a,0x00,
    0x32,0x00,0x32,0x08, 0x46,0x6e,0xaa,0x02,
    0x00,0x03,0x0a,0xff, 0xce,0xff,0xce,0x08,
    0xba,0x92,0x56,0x02, 0x00,0x16,0x0a,0x00,
    0x96,0xff,0x4c,0x08, 0xd3,0xdd,0xec,0x02,
    0x00,0x01,0x0a,0x00, 0x96,0xff,0xf1,0x08,
    0xd3,0xdd,0xec,0x02, 0x00,0x01,0x0a,0x00,
    0x96,0xff,0xfa,0x02, 0x00,0x01,0x0a,0xfd,
    0x5d,0x00,0x78,0x02, 0x00,0x01,0x0f,0x01,
    0x00,0x0c,0x00,0x04, 0x0a,0x00,0x19,0x00,
    0x19,0x08,0x32,0x19, 0x14,0x02,0x00,0x01,
    0x0d,0x0a,0x00,0x19, 0x00,0x19,0x08,0x32,
    0x96,0xaa,0x02,0x00, 0x03,0x0a,0xff,0xe7,
    0xff,0xe7,0x08,0xce, 0x6a,0x56,0x02,0x00,
    0x16,0x0a,0x00,0x4b, 0xff,0xa6,0x08,0xce,
    0xe7,0xec,0x02,0x00, 0x01,0x0a,0x00,0x4b,
    0xff,0xf9,0x08,0xce, 0xe7,0xec,0x02,0x00,
    0x01,0x0a,0x00,0x4b, 0xff,0xf9,0x02,0x00,
    0x01,0x0a,0xfe,0xd4, 0x00,0x3c,0x02,0x00,
    0x01,0x0f,
};

static ANIMATION anm_mark_form_800C3450 = {
    PCX_Q_MARK,                     // field_0_texture_hash
    1,                              // field_2
    1,                              // field_4
    1,                              // n_anims
    1,                              // n_vertices
    500,                            // field_A
    1,                              // field_C
    80,                             // field_E_xw
    80,                             // field_10_yh
    0,                              // field_12_rgb
    NULL,                           // pre_script
    (char *)anm_mark_data_800E011C  // field_18_ptr
};

/*---------------------------------------------------------------------------*/

static const char anm_mark_data_800E0220[] = {
    0x00,0x04,0x01,0x00, 0x05,0x02,0x00,0x01,
    0x0f
};

static ANIMATION anm_mark_form_800C346C = {
    PCX_HEART,                      // field_0_texture_hash
    1,                              // field_2
    1,                              // field_4
    1,                              // n_anims
    1,                              // n_vertices
    0,                              // field_A
    1,                              // field_C
    70,                             // field_E_xw
    70,                             // field_10_yh
    255,                            // field_12_rgb
    NULL,                           // pre_script
    (char *)anm_mark_data_800E0220  // field_18_ptr
};

/*---------------------------------------------------------------------------*/

static unsigned short mark_tex_list[] = {
    PCX_B_MARK,         // "！" Bikkuri mark
    PCX_Q_MARK,         // "？" Question mark
    PCX_HEART           // "❤" Heart
};
#define TEX_B_MARK      0
#define TEX_Q_MARK      1
#define TEX_HEART       2

/*---------------------------------------------------------------------------*/

void *AN_Unknown_800CA1EC( MATRIX *mat, int mark )
{
    SVECTOR  *pos;
    PRESCRIPT pre;
    ANIMATION *anim;

    anim = 0;
    pos = &pre.pos;
    pos->vx = 0;
    pos->vy = 800;
    pos->vz = 0;

    pre.speed   = DG_ZeroVector;
    pre.scr_num = 0;
    pre.s_anim  = 0;

    switch ( mark )
    {
    case 0:
        anm_mark_form_800C3418.field_0_texture_hash = mark_tex_list[TEX_B_MARK];
        anim = &anm_mark_form_800C3418;
        break;
    case 1:
        anm_mark_form_800C3418.field_0_texture_hash = mark_tex_list[TEX_Q_MARK];
        anim = &anm_mark_form_800C3418;
        break;
    case 2:
        anm_mark_form_800C3434.field_0_texture_hash = mark_tex_list[TEX_B_MARK];
        anim = &anm_mark_form_800C3434;
        break;
    case 3:
        anm_mark_form_800C3434.field_0_texture_hash = mark_tex_list[TEX_Q_MARK];
        anim = &anm_mark_form_800C3434;
        break;
    case 4:
        anm_mark_form_800C3450.field_0_texture_hash = mark_tex_list[TEX_B_MARK];
        anim = &anm_mark_form_800C3450;
        break;
    case 5:
        anm_mark_form_800C3450.field_0_texture_hash = mark_tex_list[TEX_Q_MARK];
        anim = &anm_mark_form_800C3450;
        break;
    case 6:
        anm_mark_form_800C3418.field_0_texture_hash = mark_tex_list[TEX_HEART];
        anim = &anm_mark_form_800C3418;
        pre.scr_num = 1;
        break;
    }

    anim->pre_script = &pre;
    return NewAnime( mat, 0, anim );
}

void *AN_Unknown_800CA320( MATRIX *mat, int mark )
{
    SVECTOR  *pos;
    PRESCRIPT pre;
    ANIMATION *anim;

    anim = 0;
    pos = &pre.pos;
    pos->vx = 0;
    pos->vy = 600;
    pos->vz = 0;

    pre.speed   = DG_ZeroVector;
    pre.scr_num = 1;
    pre.s_anim  = 0;

    switch ( mark )
    {
    case 0:
        anm_mark_form_800C3418.field_0_texture_hash = mark_tex_list[TEX_B_MARK];
        anim = &anm_mark_form_800C3418;
        break;
    case 1:
        anm_mark_form_800C3418.field_0_texture_hash = mark_tex_list[TEX_Q_MARK];
        anim = &anm_mark_form_800C3418;
        break;
    case 2:
        anm_mark_form_800C3434.field_0_texture_hash = mark_tex_list[TEX_B_MARK];
        anim = &anm_mark_form_800C3434;
        break;
    case 3:
        anm_mark_form_800C3434.field_0_texture_hash = mark_tex_list[TEX_Q_MARK];
        anim = &anm_mark_form_800C3434;
        break;
    case 4:
        anm_mark_form_800C3450.field_0_texture_hash = mark_tex_list[TEX_B_MARK];
        anim = &anm_mark_form_800C3450;
        break;
    case 5:
        anm_mark_form_800C3450.field_0_texture_hash = mark_tex_list[TEX_Q_MARK];
        anim = &anm_mark_form_800C3450;
        break;
    case 6:
        anm_mark_form_800C3418.field_0_texture_hash = mark_tex_list[TEX_HEART];
        anim = &anm_mark_form_800C3418;
        pre.scr_num = 2;
        break;
    }

    anim->pre_script = &pre;
    return NewAnime( mat, 0, anim );
}

void *AN_Unknown_800CA458( MATRIX *mat, int mark )
{
    SVECTOR  *pos;
    PRESCRIPT pre;
    ANIMATION *anim;

    anim = 0;
    pos = &pre.pos;
    pos->vx = 0;
    pos->vy = 120;
    pos->vz = 0;

    pre.speed   = DG_ZeroVector;
    pre.scr_num = 2;
    pre.s_anim  = 0;

    switch ( mark )
    {
    case 0:
        anm_mark_form_800C3418.field_0_texture_hash = mark_tex_list[TEX_B_MARK];
        anim = &anm_mark_form_800C3418;
        pre.scr_num = 3;
        break;
    case 1:
        anm_mark_form_800C3418.field_0_texture_hash = mark_tex_list[TEX_Q_MARK];
        anim = &anm_mark_form_800C3418;
        break;
    case 2:
        anm_mark_form_800C3434.field_0_texture_hash = mark_tex_list[TEX_B_MARK];
        anim = &anm_mark_form_800C3434;
        break;
    case 3:
        anm_mark_form_800C3434.field_0_texture_hash = mark_tex_list[TEX_Q_MARK];
        anim = &anm_mark_form_800C3434;
        break;
    case 4:
        anm_mark_form_800C3450.field_0_texture_hash = mark_tex_list[TEX_B_MARK];
        anim = &anm_mark_form_800C3450;
        break;
    case 5:
        anm_mark_form_800C3450.field_0_texture_hash = mark_tex_list[TEX_Q_MARK];
        anim = &anm_mark_form_800C3450;
        break;
    case 6:
        anm_mark_form_800C3418.field_0_texture_hash = mark_tex_list[TEX_HEART];
        anim = &anm_mark_form_800C3418;
        pre.scr_num = 3;
        break;
    }

    anim->pre_script = &pre;
    return NewAnime( mat, 0, anim );
}

void AN_Unknown_800CA594( SVECTOR *pos )
{
    ANIMATION *anm;
    PRESCRIPT  pre;

    pre.pos = *pos;
    pre.speed = DG_ZeroVector;
    pre.scr_num = 0;
    pre.s_anim = 0;

    anm = &anm_mark_form_800C346C;
    anm->pre_script = &pre;

    NewAnime( NULL, 0, anm );
}
