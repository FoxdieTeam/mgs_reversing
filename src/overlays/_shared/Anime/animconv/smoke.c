#include "common.h"
#include "libdg/libdg.h"
#include "Anime/animconv/anime.h"
#include "strcode.h"

/*---------------------------------------------------------------------------*/

static const char anm_piyopiyo_data[] = {
    0x02,0x97,0x03,0x00, 0x09,0x00,0xe6,0x01,
    0xc3,0x08,0x00,0xfc, 0xde,0x04,0x00,0x64,
    0x01,0xf4,0xff,0x53, 0x0c,0x00,0x03,0x02,
    0x00,0x01,0x0d,0x0c, 0x00,0x03,0x0a,0xfe,
    0x70,0x00,0x00,0x04, 0xff,0x9c,0x00,0x00,
    0xff,0xe5,0x0c,0x00, 0x03,0x02,0x00,0x01,
    0x0d,0x04,0xff,0x9c, 0x00,0x00,0x00,0x1b,
    0x0c,0x00,0x03,0x02, 0x00,0x01,0x0d,0x0a,
    0x01,0x90,0x00,0x00, 0x04,0xff,0xb7,0x00,
    0x00,0x00,0x49,0x0c, 0x00,0x03,0x02,0x00,
    0x01,0x0d,0x04,0xff, 0xe5,0x00,0x00,0x00,
    0x64,0x0c,0x00,0x03, 0x02,0x00,0x01,0x0d,
    0x0a,0xfe,0x70,0x00, 0x00,0x04,0x00,0x1b,
    0x00,0x00,0x00,0x64, 0x0c,0x00,0x03,0x02,
    0x00,0x01,0x0d,0x04, 0x00,0x49,0x00,0x00,
    0x00,0x49,0x0c,0x00, 0x03,0x02,0x00,0x01,
    0x0d,0x0a,0x01,0x90, 0x00,0x00,0x04,0x00,
    0x64,0x00,0x00,0x00, 0x1b,0x0c,0x00,0x03,
    0x02,0x00,0x01,0x0d, 0x04,0x00,0x64,0x00,
    0x00,0xff,0xe5,0x0c, 0x00,0x03,0x02,0x00,
    0x01,0x0d,0x0a,0xfe, 0x70,0x00,0x00,0x04,
    0x00,0x49,0x00,0x00, 0xff,0xb7,0x0c,0x00,
    0x03,0x02,0x00,0x01, 0x0d,0x04,0x00,0x1b,
    0x00,0x00,0xff,0x9c, 0x0c,0x00,0x03,0x02,
    0x00,0x01,0x0d,0x0a, 0x01,0x90,0x00,0x00,
    0x04,0xff,0xe5,0x00, 0x00,0xff,0x9c,0x0c,
    0x00,0x03,0x02,0x00, 0x01,0x0d,0x04,0xff,
    0xb7,0x00,0x00,0xff, 0xb7,0x0c,0x00,0x03,
    0x02,0x00,0x01,0x0d, 0x0d,0x0f,0x08,0x00,
    0xfc,0xde,0x04,0xff, 0x38,0x01,0xf4,0x00,
    0x00,0x0c,0x00,0x03, 0x02,0x00,0x01,0x0d,
    0x0c,0x00,0x03,0x0a, 0xfe,0x70,0x00,0x00,
    0x04,0x00,0x1b,0x00, 0x00,0x00,0x64,0x0c,
    0x00,0x03,0x02,0x00, 0x01,0x0d,0x04,0x00,
    0x49,0x00,0x00,0x00, 0x49,0x0c,0x00,0x03,
    0x02,0x00,0x01,0x0d, 0x0a,0x01,0x90,0x00,
    0x00,0x04,0x00,0x64, 0x00,0x00,0x00,0x1b,
    0x0c,0x00,0x03,0x02, 0x00,0x01,0x0d,0x04,
    0x00,0x64,0x00,0x00, 0xff,0xe5,0x0c,0x00,
    0x03,0x02,0x00,0x01, 0x0d,0x0a,0xfe,0x70,
    0x00,0x00,0x04,0x00, 0x49,0x00,0x00,0xff,
    0xb7,0x0c,0x00,0x03, 0x02,0x00,0x01,0x0d,
    0x04,0x00,0x1b,0x00, 0x00,0xff,0x9c,0x0c,
    0x00,0x03,0x02,0x00, 0x01,0x0d,0x0a,0x01,
    0x90,0x00,0x00,0x04, 0xff,0xe5,0x00,0x00,
    0xff,0x9c,0x0c,0x00, 0x03,0x02,0x00,0x01,
    0x0d,0x04,0xff,0xb7, 0x00,0x00,0xff,0xb7,
    0x0c,0x00,0x03,0x02, 0x00,0x01,0x0d,0x0a,
    0xfe,0x70,0x00,0x00, 0x04,0xff,0x9c,0x00,
    0x00,0xff,0xe5,0x0c, 0x00,0x03,0x02,0x00,
    0x01,0x0d,0x04,0xff, 0x9c,0x00,0x00,0x00,
    0x1b,0x0c,0x00,0x03, 0x02,0x00,0x01,0x0d,
    0x0a,0x01,0x90,0x00, 0x00,0x04,0xff,0xb7,
    0x00,0x00,0x00,0x49, 0x0c,0x00,0x03,0x02,
    0x00,0x01,0x0d,0x04, 0xff,0xe5,0x00,0x00,
    0x00,0x64,0x0c,0x00, 0x03,0x02,0x00,0x01,
    0x0d,0x0d,0x0f,0x08, 0x00,0xfc,0xde,0x04,
    0x00,0x64,0x01,0xf4, 0x00,0xad,0x0c,0x00,
    0x03,0x02,0x00,0x01, 0x0d,0x0c,0x00,0x03,
    0x0a,0xfe,0x70,0x00, 0x00,0x04,0x00,0x49,
    0x00,0x00,0xff,0xb7, 0x0c,0x00,0x03,0x02,
    0x00,0x01,0x0d,0x04, 0x00,0x1b,0x00,0x00,
    0xff,0x9c,0x0c,0x00, 0x03,0x02,0x00,0x01,
    0x0d,0x0a,0x01,0x90, 0x00,0x00,0x04,0xff,
    0xe5,0x00,0x00,0xff, 0x9c,0x0c,0x00,0x03,
    0x02,0x00,0x01,0x0d, 0x04,0xff,0xb7,0x00,
    0x00,0xff,0xb7,0x0c, 0x00,0x03,0x02,0x00,
    0x01,0x0d,0x0a,0xfe, 0x70,0x00,0x00,0x04,
    0xff,0x9c,0x00,0x00, 0xff,0xe5,0x0c,0x00,
    0x03,0x02,0x00,0x01, 0x0d,0x04,0xff,0x9c,
    0x00,0x00,0x00,0x1b, 0x0c,0x00,0x03,0x02,
    0x00,0x01,0x0d,0x0a, 0x01,0x90,0x00,0x00,
    0x04,0xff,0xb7,0x00, 0x00,0x00,0x49,0x0c,
    0x00,0x03,0x02,0x00, 0x01,0x0d,0x04,0xff,
    0xe5,0x00,0x00,0x00, 0x64,0x0c,0x00,0x03,
    0x02,0x00,0x01,0x0d, 0x0a,0xfe,0x70,0x00,
    0x00,0x04,0x00,0x1b, 0x00,0x00,0x00,0x64,
    0x0c,0x00,0x03,0x02, 0x00,0x01,0x0d,0x04,
    0x00,0x49,0x00,0x00, 0x00,0x49,0x0c,0x00,
    0x03,0x02,0x00,0x01, 0x0d,0x0a,0x01,0x90,
    0x00,0x00,0x04,0x00, 0x64,0x00,0x00,0x00,
    0x1b,0x0c,0x00,0x03, 0x02,0x00,0x01,0x0d,
    0x04,0x00,0x64,0x00, 0x00,0xff,0xe5,0x0c,
    0x00,0x03,0x02,0x00, 0x01,0x0d,0x0d,0x0f
};

static ANIMATION anm_piyopiyo_form = {
    PCX_HOSI,                   // field_0_texture_hash
    1,                          // field_2
    1,                          // field_4
    1,                          // n_anims
    1,                          // n_vertices
    0,                          // field_A
    1,                          // field_C
    200,                        // field_E_xw
    200,                        // field_10_yh
    128,                        // field_12_rgb
    NULL,                       // pre_script
    (char *)anm_piyopiyo_data   // field_18_ptr
};

/*---------------------------------------------------------------------------*/

static const char s00a_dword_800E054C[] = {
    0x00,0x57,0x01,0x00, 0x05,0x0c,0x00,0x1c,
    0x0a,0x00,0x05,0x00, 0x05,0x04,0x00,0x00,
    0x00,0x0a,0x00,0x00, 0x02,0x00,0x01,0x0d,
    0x0c,0x00,0x04,0x0c, 0x00,0x05,0x0a,0xff,
    0xf6,0xff,0xf6,0x04, 0x00,0x00,0x00,0x0a,
    0x00,0x00,0x02,0x00, 0x01,0x0d,0x02,0x00,
    0x01,0x0c,0x00,0x05, 0x0a,0x00,0x0a,0x00,
    0x0a,0x04,0x00,0x00, 0x00,0x0a,0x00,0x00,
    0x02,0x00,0x01,0x0d, 0x02,0x00,0x01,0x0d,
    0x0c,0x00,0x0e,0x0a, 0xff,0xf6,0xff,0xf6,
    0x04,0x00,0x00,0x00, 0x0a,0x00,0x00,0x02,
    0x00,0x01,0x0d,0x0f
};

static ANIMATION s00a_dword_800C34C8 = {
    0x4184,                     // field_0_texture_hash
    1,                          // field_2
    1,                          // field_4
    1,                          // n_anims
    1,                          // n_vertices
    0,                          // field_A
    5,                          // field_C
    10,                         // field_E_xw
    10,                         // field_10_yh
    128,                        // field_12_rgb
    NULL,                       // pre_script
    (char *)s00a_dword_800E054C // field_18_ptr
};

/*---------------------------------------------------------------------------*/

static const char s00a_dword_800E05A8[] = {
    0x00,0x41,0x01,0x00, 0x05,0x01,0xfe,0x0c,
    0x00,0x1c,0x01,0xff, 0x0a,0x00,0x02,0x00,
    0x0a,0x04,0x00,0x00, 0x00,0x0a,0x00,0x00,
    0x02,0x00,0x01,0x0d, 0x0c,0x00,0x04,0x0c,
    0x00,0x05,0x01,0xff, 0x04,0x00,0x00,0x00,
    0x0a,0x00,0x00,0x02, 0x00,0x01,0x0d,0x0d,
    0x0c,0x00,0x0e,0x01, 0xff,0x0a,0xff,0xfc,
    0xff,0xec,0x04,0x00, 0x00,0x00,0x0a,0x00,
    0x00,0x02,0x00,0x01, 0x0d,0x0f
};

static ANIMATION s00a_dword_800C34E4 = {
    PCX_SMOKE,                  // field_0_texture_hash
    8,                          // field_2
    4,                          // field_4
    30,                         // n_anims
    1,                          // n_vertices
    0,                          // field_A
    1,                          // field_C
    10,                         // field_E_xw
    10,                         // field_10_yh
    255,                        // field_12_rgb
    NULL,                       // pre_script
    (char *)s00a_dword_800E05A8 // field_18_ptr
};

/*---------------------------------------------------------------------------*/

void AN_Piyopiyo( SVECTOR *pos )
{
    ANIMATION *anm;
    PRESCRIPT  pre;

    pre.pos = *pos;
    pre.speed = DG_ZeroVector;
    pre.s_anim = 0;

    anm = &anm_piyopiyo_form;
    anm->pre_script = &pre;

    pre.scr_num = 0;
    NewAnime( NULL, 0, anm );

    pre.scr_num = 1;
    NewAnime( NULL, 0, anm );

    pre.scr_num = 2;
    NewAnime( NULL, 0, anm );
}

void s00a_command_800CA758( SVECTOR* pos )
{
    ANIMATION *anm;
    PRESCRIPT  pre;

    pre.pos = *pos;
    pre.speed = DG_ZeroVector;
    pre.s_anim = 0;

    anm = &s00a_dword_800C34E4;
    anm->pre_script = &pre;
    pre.scr_num = 0;

    NewAnime( NULL, 0, anm );
}
