#include "libdg/libdg.h"
#include "libgcl/hash.h"
#include "Anime/animeconv/anime.h"

extern SVECTOR DG_ZeroVector_800AB39C;

const char s13a_dword_800E31C8[] = {0x0, 0x15, 0x1, 0x0};
const char s13a_dword_800E31CC[] = {0x5, 0x1, 0xfe, 0xc};
const char s13a_dword_800E31D0[] = {0x0, '\n', 0x1, 0xff};
const char s13a_dword_800E31D4[] = {'\n', 0x0, 0x6, 0x0};
const char s13a_dword_800E31D8[] = {0x6, 0x8, 0xfa, 0xfa};
const char s13a_dword_800E31DC[] = {0xfa, 0x2, 0x0, 0x1};
const char s13a_dword_800E31E0[] = {0xd, 0xf, 0x0, 0x0};

ANIMATION anm_800C370C = { PCX_SMOKE, 8, 4, 30, 8, 500, 3, 300, 300, 64, NULL, (char *)s13a_dword_800E31C8 };

const char s13a_dword_800E31E4[] = {0x0, 0x90, 0x4, 0x0};
const char s13a_dword_800E31E8[] = {0xb, 0x0, ',', 0x0};
const char s13a_dword_800E31EC[] = {'Q', 0x0, 'v', 0xc};
const char s13a_dword_800E31F0[] = {0x0, 0x5, 0x1, 0xff};
const char s13a_dword_800E31F4[] = {'\n', 0x0, '2', 0x0};
const char s13a_dword_800E31F8[] = {'2', 0x2, 0x0, 0x1};
const char s13a_dword_800E31FC[] = {0xd, 0xc, 0x0, '\n'};
const char s13a_dword_800E3200[] = {0x1, 0xff, '\n', 0x0};
const char s13a_dword_800E3204[] = {'d', 0x0, 'd', 0x8};
const char s13a_dword_800E3208[] = {0xf4, 0xf4, 0xf4, 0x2};
const char s13a_dword_800E320C[] = {0x0, 0x1, 0xd, 0xf};
const char s13a_dword_800E3210[] = {0x8, 0x0, 0xc0, 0xc0};
const char s13a_dword_800E3214[] = {0xc, 0x0, 0x5, 0x1};
const char s13a_dword_800E3218[] = {0xff, '\n', 0x0, '2'};
const char s13a_dword_800E321C[] = {0x0, '2', 0x2, 0x0};
const char s13a_dword_800E3220[] = {0x1, 0xd, 0xc, 0x0};
const char s13a_dword_800E3224[] = {'\n', 0x1, 0xff, '\n'};
const char s13a_dword_800E3228[] = {0x0, 'd', 0x0, 'd'};
const char s13a_dword_800E322C[] = {0x8, 0xf4, 0xfa, 0xfa};
const char s13a_dword_800E3230[] = {0x2, 0x0, 0x1, 0xd};
const char s13a_dword_800E3234[] = {0xf, 0x8, 0xe0, 0x0};
const char s13a_dword_800E3238[] = {0xe0, 0xc, 0x0, 0x5};
const char s13a_dword_800E323C[] = {0x1, 0xff, '\n', 0x0};
const char s13a_dword_800E3240[] = {'2', 0x0, '2', 0x2};
const char s13a_dword_800E3244[] = {0x0, 0x1, 0xd, 0xc};
const char s13a_dword_800E3248[] = {0x0, '\n', 0x1, 0xff};
const char s13a_dword_800E324C[] = {'\n', 0x0, 'd', 0x0};
const char s13a_dword_800E3250[] = {'d', 0x8, 0xf7, 0xf4};
const char s13a_dword_800E3254[] = {0xf7, 0x2, 0x0, 0x1};
const char s13a_dword_800E3258[] = {0xd, 0xf, 0x8, 0xe0};
const char s13a_dword_800E325C[] = {0xe0, 0x0, 0xc, 0x0};
const char s13a_dword_800E3260[] = {0x5, 0x1, 0xff, '\n'};
const char s13a_dword_800E3264[] = {0x0, '2', 0x0, '2'};
const char s13a_dword_800E3268[] = {0x2, 0x0, 0x1, 0xd};
const char s13a_dword_800E326C[] = {0xc, 0x0, '\n', 0x1};
const char s13a_dword_800E3270[] = {0xff, '\n', 0x0, 'd'};
const char s13a_dword_800E3274[] = {0x0, 'd', 0x8, 0xf7};
const char s13a_dword_800E3278[] = {0xf7, 0xf4, 0x2, 0x0};
const char s13a_dword_800E327C[] = {0x1, 0xd, 0xf, 0x0};

ANIMATION anm_800C3728 = { PCX_SMOKE, 8, 4, 30, 1, 500, 1, 300, 300, 128, NULL, (char *)s13a_dword_800E31E4 };

const char s13a_dword_800E3280[] = {0x0, '%', 0x1, 0x0};
const char s13a_dword_800E3284[] = {0x5, 0x8, 0xff, 0xff};
const char s13a_dword_800E3288[] = {0xff, 0xc, 0x0, 0x5};
const char s13a_dword_800E328C[] = {0x1, 0xff, '\n', 0x0};
const char s13a_dword_800E3290[] = {'2', 0x0, '2', 0x2};
const char s13a_dword_800E3294[] = {0x0, 0x1, 0xd, 0xc};
const char s13a_dword_800E3298[] = {0x0, '\n', 0x1, 0xff};
const char s13a_dword_800E329C[] = {'\n', 0x0, 'd', 0x0};
const char s13a_dword_800E32A0[] = {'d', 0x8, 0xf4, 0xf4};
const char s13a_dword_800E32A4[] = {0xf4, 0x2, 0x0, 0x1};
const char s13a_dword_800E32A8[] = {0xd, 0xf, 0x0, 0x0};

ANIMATION anm_800C3744 = { PCX_SMOKE, 8, 4, 30, 1, 500, 1, 300, 300, 0, NULL, (char *)s13a_dword_800E3280 };

const char s13a_dword_800E32AC[] = {0x0, 0x13, 0x1, 0x0};
const char s13a_dword_800E32B0[] = {0x5, 0xc, 0x0, 0x9};
const char s13a_dword_800E32B4[] = {0x1, 0xff, '\n', 0x0};
const char s13a_dword_800E32B8[] = {'x', 0x0, 'x', 0x8};
const char s13a_dword_800E32BC[] = {0xe7, 0xe7, 0xe7, 0x2};
const char s13a_dword_800E32C0[] = {0x0, 0x1, 0xd, 0xf};

ANIMATION anm_800C3760 = { PCX_SMOKE, 8, 4, 30, 1, 500, 3, 300, 300, 255, NULL, (char *)s13a_dword_800E32AC };

const char s13a_dword_800E32C4[] = {0x0, '6', 0x2, 0x0};
const char s13a_dword_800E32C8[] = {0x7, 0x0, 0x1c, 0x1};
const char s13a_dword_800E32CC[] = {0xfe, 0xc, 0x0, 0x7};
const char s13a_dword_800E32D0[] = {'\n', 0x1, ',', 0x1};
const char s13a_dword_800E32D4[] = {',', 0x1, 0xff, 0x8};
const char s13a_dword_800E32D8[] = {0xf8, 0xf8, 0xf8, 0x2};
const char s13a_dword_800E32DC[] = {0x0, 0x1, 0xd, 0xf};
const char s13a_dword_800E32E0[] = {0x1, 0xfe, '\n', 0x1};
const char s13a_dword_800E32E4[] = {0xf4, 0x1, 0xf4, 0x8};
const char s13a_dword_800E32E8[] = {0xbe, 0xbe, 0xbe, 0x2};
const char s13a_dword_800E32EC[] = {0x0, 0x1, 0xc, 0x0};
const char s13a_dword_800E32F0[] = {0xf, '\n', 0x0, 0xc8};
const char s13a_dword_800E32F4[] = {0x0, 0xc8, 0x1, 0xff};
const char s13a_dword_800E32F8[] = {0x8, 0xf0, 0xf0, 0xf0};
const char s13a_dword_800E32FC[] = {0x2, 0x0, 0x1, 0xd};
const char s13a_dword_800E3300[] = {0xf, 0x0, 0x0, 0x0};

ANIMATION anm_800C377C = { PCX_SMOKE, 8, 4, 30, 1, 0, 1, 800, 800, 64, NULL, (char *)s13a_dword_800E32C4 };

const char s13a_dword_800E3304[] = {0x0, 0x15, 0x1, 0x0};
const char s13a_dword_800E3308[] = {0x5, 0x1, 0xfe, 0xc};
const char s13a_dword_800E330C[] = {0x0, 0x7, '\n', 0xff};
const char s13a_dword_800E3310[] = {0xe2, 0xff, 0xe2, 0x1};
const char s13a_dword_800E3314[] = {0xff, 0x8, 0xf8, 0xf8};
const char s13a_dword_800E3318[] = {0xf8, 0x2, 0x0, 0x1};
const char s13a_dword_800E331C[] = {0xd, 0xf};

ANIMATION anm_800C3798 = { PCX_SMOKE, 8, 4, 30, 1, 0, 1, 400, 400, 32, NULL, (char *)s13a_dword_800E3304 };

void AN_Unknown_800DC4B4(SVECTOR *pos, int ang)
{
    SVECTOR    rot;
    SVECTOR    speed;
    char       unused[0x20];
    PRESCRIPT  pre[8];
    ANIMATION *anm;
    int        i;

    rot.vx = 0;
    rot.vz = 0;

    for (i = 0; i < 8; i++, pos++)
    {
        pre[i].pos = *pos;
        pre[i].scr_num = 0;
        pre[i].s_anim = 0;

        speed.vx = 0;
        speed.vy = 0;
        speed.vz = GV_RandU(32) + 50;

        rot.vy = ang + GV_RandS(32);

        DG_SetPos2(&DG_ZeroVector_800AB39C, &rot);
        DG_PutVector(&speed, &pre[i].speed, 1);
    }

    anm = &anm_800C370C;
    anm->pre_script = pre;
    NewAnime_8005FBC8(NULL, 0, anm);
}

void AN_Unknown_800DC5B4(SVECTOR *pos, SVECTOR *speed, int script)
{
    PRESCRIPT  pre;
    SVECTOR   *ppos;
    ANIMATION *anm;

    ppos = &pre.pos;
    ppos->vx = pos->vx + GV_RandS(32);
    ppos->vy = pos->vy + GV_RandS(32);
    ppos->vz = pos->vz + GV_RandS(32);
    pre.speed = *speed;
    pre.scr_num = script;
    pre.s_anim = GV_RandU(1024) % 30;

    anm = &anm_800C3728;
    anm->pre_script = &pre;
    NewAnime_8005FBC8(NULL, 0, anm);
}

void AN_Unknown_800DC6AC(SVECTOR *pos, SVECTOR *speed, char r, char g, char b)
{
    PRESCRIPT  pre;
    SVECTOR   *ppos;
    ANIMATION *anm;

    ppos = &pre.pos;
    ppos->vx = pos->vx + GV_RandS(32);
    ppos->vy = pos->vy + GV_RandS(32);
    ppos->vz = pos->vz + GV_RandS(32);
    pre.scr_num = 0;
    pre.speed = *speed;
    pre.s_anim = GV_RandU(1024) % 30;

    anm = &anm_800C3744;
    anm->pre_script = &pre;
    anm->field_18_ptr[6] = r;
    anm->field_18_ptr[7] = g;
    anm->field_18_ptr[8] = b;
    anm->field_18_ptr[34] = -((r - 1) / 10);
    anm->field_18_ptr[35] = -((g - 1) / 10);
    anm->field_18_ptr[36] = -((b - 1) / 10);
    NewAnime_8005FBC8(NULL, 0, anm);
}

void AN_Unknown_800DC860(SVECTOR *pos, SVECTOR *speed)
{
    PRESCRIPT  pre;
    SVECTOR   *ppos;
    ANIMATION *anm;

    ppos = &pre.pos;
    ppos->vx = pos->vx + GV_RandS(32);
    ppos->vy = pos->vy + GV_RandS(32);
    ppos->vz = pos->vz + GV_RandS(32);
    pre.speed = *speed;
    pre.scr_num = 0;
    pre.s_anim = GV_RandU(1024) % 30;

    anm = &anm_800C3760;
    anm->pre_script = &pre;
    NewAnime_8005FBC8(NULL, 0, &anm_800C3760);
}

void AN_Unknown_800DC94C(SVECTOR *pos)
{
    PRESCRIPT  pre;
    SVECTOR   *speed;
    ANIMATION *anm;

    pre.pos = *pos;
    speed = &pre.speed;
    speed->vx = 0;
    speed->vy = GV_RandU(128) + 64;
    speed->vz = 0;
    pre.scr_num = 1;
    pre.s_anim = 0;

    anm = &anm_800C377C;
    anm->pre_script = &pre;
    NewAnime_8005FBC8(NULL, 0, anm);
}

void AN_Unknown_800DC9C8(SVECTOR *pos)
{
    PRESCRIPT  pre;
    ANIMATION *anm;

    pre.pos = *pos;
    pre.speed = DG_ZeroVector_800AB39C;
    pre.scr_num = 0;
    pre.s_anim = 0;

    anm = &anm_800C3798;
    anm->pre_script = &pre;
    NewAnime_8005FBC8(NULL, 0, anm);
}
