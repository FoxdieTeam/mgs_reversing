#include "common.h"
#include "libdg/libdg.h"
#include "Anime/animconv/anime.h"
#include "strcode.h"

/*---------------------------------------------------------------------------*/

static const char anm_sleep_data[] = {
    0x00,0x96,0x03,0x00, 0x09,0x00,0x3B,0x00,
    0x6d,0x08,0x00,0x02, 0x1e,0x02,0x00,0x01,
    0x0c,0x00,0x19,0x08, 0x04,0x06,0x06,0x0a,
    0x00,0x04,0x00,0x04, 0x04,0x00,0x04,0x00,
    0x14,0x00,0x00,0x02, 0x00,0x01,0x0d,0x0c,
    0x00,0x0f,0x0a,0x00, 0x04,0x00,0x04,0x04,
    0x00,0x04,0x00,0x14, 0x00,0x00,0x02,0x00,
    0x01,0x0d,0x0f,0x08, 0x00,0x02,0x1e,0x02,
    0x00,0x0b,0x0c,0x00, 0x19,0x08,0x04,0x06,
    0x06,0x0a,0x00,0x04, 0x00,0x04,0x04,0x00,
    0x04,0x00,0x14,0x00, 0x00,0x02,0x00,0x01,
    0x0d,0x0c,0x00,0x0f, 0x0a,0x00,0x04,0x00,
    0x04,0x04,0x00,0x04, 0x00,0x14,0x00,0x00,
    0x02,0x00,0x01,0x0d, 0x0f,0x08,0x00,0x02,
    0x1e,0x02,0x00,0x15, 0x0c,0x00,0x19,0x08,
    0x04,0x06,0x06,0x0a, 0x00,0x04,0x00,0x04,
    0x04,0x00,0x04,0x00, 0x14,0x00,0x00,0x02,
    0x00,0x01,0x0d,0x0c, 0x00,0x0f,0x0a,0x00,
    0x04,0x00,0x04,0x04, 0x00,0x04,0x00,0x14,
    0x00,0x00,0x02,0x00, 0x01,0x0d,0x0f
};

static ANIMATION anm_sleep_form = {
    PCX_ZZZ,                    // field_0_texture_hash
    1,                          // field_2
    1,                          // field_4
    1,                          // n_anims
    1,                          // n_vertices
    0,                          // field_A
    1,                          // field_C
    2,                          // field_E_xw
    2,                          // field_10_yh
    0,                          // field_12_rgb
    NULL,                       // pre_script
    (char *)anm_sleep_data      // field_18_ptr
};

/*---------------------------------------------------------------------------*/

void AN_Sleep( SVECTOR *pos )
{
    ANIMATION *anm;
    PRESCRIPT  pre;

    pre.pos = *pos;
    pre.speed = DG_ZeroVector;
    pre.s_anim = 0;

    anm = &anm_sleep_form;
    anm->pre_script = &pre;

    pre.scr_num = 0;
    NewAnime( NULL, 0, anm );

    pre.scr_num = 1;
    NewAnime( NULL, 0, anm );

    pre.scr_num = 2;
    NewAnime( NULL, 0, anm );
}
